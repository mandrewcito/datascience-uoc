<html>

<head>
    <script src="./js-colormaps.js"></script>
    <script src="https://cdn.anychart.com/releases/8.9.0/js/anychart-base.min.js"></script>
    <script src="https://cdn.anychart.com/releases/8.9.0/js/anychart-mekko.min.js"></script>
</head>

<body>
    <span> colormaps from <a
            href="https://github.com/timothygebhard/js-colormaps/blob/master/js-colormaps.js">js-colormaps</a></span>
    <span>Fuente de los datos https://servicios.ine.es</span>
    <div id="container"></div>

    <script lang="javascript">


        function drawGraphic(data) {
            var muertesCovid = data.filter(o => o.MetaData[2].Codigo == "00" && o.MetaData[1].Codigo != "ambossexos" && o.MetaData[0].Codigo == "00acovid19virusidentificado")
             
            var muertesMeni = data.filter(o => o.MetaData[2].Codigo == "00" && o.MetaData[1].Codigo != "ambossexos" && o.MetaData[0].Codigo == "003enfermedadmeningococica")

            var muertesTumo = data.filter(o => o.MetaData[2].Codigo == "00" && o.MetaData[1].Codigo != "ambossexos" && o.MetaData[0].Codigo == "009041iitumores")
            
            var muertesInfecciosas = data.filter(o => o.MetaData[2].Codigo == "00" && o.MetaData[1].Codigo != "ambossexos" && o.MetaData[0].Codigo == "001008ienfermedadesinfecciosasyparasitarias")
            
            var myData = {
                title: 'Causas de muertes mostradas por sexo',
                header: ['','Hombre', 'Mujer'],
                rows: [
                    ['Covid',  muertesCovid[0].Data[0].Valor,  muertesCovid[1].Data[0].Valor],
                    ['Meningococo',  muertesMeni[0].Data[0].Valor,  muertesMeni[1].Data[0].Valor],
                    ['Tumores',  muertesTumo[0].Data[0].Valor,  muertesTumo[1].Data[0].Valor],                    
                    ['Infeciosas',  muertesInfecciosas[0].Data[0].Valor,  muertesInfecciosas[1].Data[0].Valor],


                ]
            };

            createChart(myData);
        }




        function createChart(myData) {
            // create a mekko (marimekko) chart
            var chart = anychart.mekko();
            // set the chart data
            chart.data(myData);
            // enable the chart legend
            chart.legend(true);
            // set the chart container id
            chart.container('container');
            // draw the resulting marimekko chart
            chart.draw();
        }
        anychart.onDocumentReady(function () {
            fetch("https://servicios.ine.es/wstempus/js/es/DATOS_TABLA/49945?tip=AM")
                .then((data) => data.json().then(drawGraphic))
                .catch(alert)
        });
    </script>
</body>

</html>